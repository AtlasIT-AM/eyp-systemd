#!/bin/bash

#
# puppet managed file
#

PIDFILE=/var/run/<%= @servicename %>.sysvwrapper.pid

case $1 in
  start)
    <%= @initscript %> $@
    START_EXITCODE=$?
    sleep 1s;
    <%= @initscript %>.sysvwrapper.status &
    echo $! > $PIDFILE
    exit $START_EXITCODE
  ;;
  *)
    <%= @initscript %> $@
    exit $?
  ;;
esac
